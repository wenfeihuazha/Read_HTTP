# HTTP首部

## 6.1 HTTP报文首部

### HTTP请求报文

由:方法,HTTP版本,HTTP首部字段等部分构成.

### HTTP响应报文

由:方法,HTTP版本,状态码,HTTP首部字段构成

## 6.2 HTTP首部字段
他能起到传递额外重要信息的作用
> 首部字段给浏览器和服务器提供报文主体大小,所使用的语言,认证信息等内容

### 6.2.4 HTTP/1.1 首部字段一览
表 6-1: 通用首部字段
> P80
表 6-2: 请求首部字段
> P81
表 6-3: 响应首部字段
>P81
表 6-4: 实体首部字段
>P82

### 6.3.1 Cache-Control
通过职得首部字段Cache-Control的指令,就能操作缓存的工作机制.
>可以理解为通过该字段操作缓存信息

|指令类型|功能|
|:----:|:---:|
|public|明确表明其他用户也可利用缓存|
|private|与public行为相反(缓存服务器会对该特定用户提供资源缓存的服务,对其他用户发送过来的请求,代理服务器则不会返回缓存|
|no-cache|客户端角度: 不要缓存数据要从源服务器取数据  服务器角度:可以缓存,但是使用前要再确认|
|no-store|暗指请求或响应中包含机密信息,因此不能缓存|
|s-maxage|功能与max-age相同,但是s-maxage指令只适用于多位用户使用的公共缓存服务器.也就是说对于同一用户重复返回响应的服务器来说,没有任何作用|
|max-age|判断缓存时间比指定时间的数值更小,那么就接收缓存的资源.(如果设置为0,那么缓存服务器通常需要将请求转发给源服务器). 服务器返回响应中包含max-age时,缓存服务器将不对资源的有效性再做确认,max-age数值代表资源保存为缓存的最长时间|
|min-fresh|要求服务器返回至少还未过指定时间的缓存资源(假设60 就是60秒|
|max-stale|在指定时间内,过期也照常接收,为空的话,无论过期多久都正常接收|
|only-if-cached|只请求本地缓存数据,如果无响应,返回状态码504|
|must-revalidate|再次想服务器验证缓存是否有效,若无响应,应返回504(与max-stale冲突|
|proxy-revalidate|所有缓存服务器在接收到客户端带有该指令的请求返回响应之前,必须再次验证缓存的有效性|
|no-transform|规定无论是在请求还是响应中,缓存都不能改变实体主体的媒体类型(防止缓存或代理压缩图片等操作|
|cache-control|可以拓展指令(类似自定义指令,在服务端可以设置理解时有意义|

### 6.3.2 Connection
#### 控制代理不再转发的首部字段
#### 管理持久连接
>HTTP/1.1版本默认连接都是持久连接,当首部字段的值设置为close

### 6.3.4 Pragma
是HTTP/1.1版本以前历史遗留字段.
>pragma: no-cache  
在中间服务器如果不能以HTTP/1.1位基准时的处理方案
